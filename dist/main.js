!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);class n{constructor(e={}){this.parameters=e,this.TerminalApp=e.TerminalApp,this.data={},this.slides={}}async preloadSlides(){return Promise.all(Object.values(this.slides).map(this.slideLoader.bind(this)))}async slideLoader(e){const t=this.TerminalApp.parameters.htmlPath+e.html+".html",i=await fetch(t);return e.source=await i.text()}async init(e=null,t=!0){return await this.slide(e||this.data.entrySlide,void 0,t)}async slide(e,t=!0,i=!0){if(this.TerminalApp.changingSlide)return await!1;if(this.TerminalApp.changingSlide=!0,!this.slides[e])throw delete this.TerminalApp.changingSlide,new Error(`Slide ${e} not exist!`);await this.TerminalApp.unloadPage(t),this.TerminalApp.currentPresentation=this;const n=this.slides[e];return this.TerminalApp.currentSlide=n,this.TerminalApp.currentSlideId=e,!i||history.state&&history.state.slide===n&&history.state.presentation===this.data.id||history.pushState({slide:e,presentation:this.data.id},this.data.title,`?${this.data.id}#${e}`),n.source&&(this.TerminalApp.root.innerHTML=n.source),setTimeout(()=>this.TerminalApp.inAction=!1,1e3),this.TerminalApp.inAction=!1,document.body.querySelectorAll("[data-bind]").forEach(e=>{this.data[e.dataset.bind]&&(e.innerHTML=this.data[e.dataset.bind])}),n.init?await n.init().finally(e=>(delete this.TerminalApp.changingSlide,this.TerminalApp.inAction=!1,e)):(this.TerminalApp.inAction=!1,delete this.TerminalApp.changingSlide)}sleep(e){return new Promise(t=>setTimeout(t,e))}async prepareAction(){if(this.TerminalApp.inAction)throw new Error;return this.TerminalApp.inAction=!0,await!0}animateValueDelay(e,t,i,n,a){return setTimeout(function(){this.animateValue(e,t,i,n)}.bind(this),a)}animateValue(e,t,i,n){var a=i-t,s=t,c=i>t?1:-1,r=Math.abs(Math.floor(n/a)),l=document.querySelector(e),o=setInterval(function(){s+=c,l.innerHTML=s,s==i&&clearInterval(o)},r)}}class a extends n{constructor(e={}){super(e),Object.assign(this.data,{title:"А-коины",index:"01",header:"Каждое действие на сайте приносит деньги",entrySlide:"intro"}),this.slides={intro:{html:"a-coin/intro",init:async()=>await document.querySelector(".switch").addEventListener("click",async()=>this.prepareAction().then(async()=>await this.sleep(2e3).then(async()=>await this.slide("cover")))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(1500))},cover:{html:"a-coin/cover",init:async()=>await document.querySelector("#whatIs").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("whatIs"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(1e3))},whatIs:{html:"a-coin/whatIs",init:async()=>await document.querySelector("#howToGet").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("likes"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(1e3))},likes:{html:"a-coin/likes",init:async()=>await document.querySelector("#toggle-heart").addEventListener("click",async()=>await this.prepareAction().then(async()=>{document.querySelector("#toggle-heart").parentNode.parentNode.classList.toggle("active"),this.animateValueDelay(".wallet",0,100,500,500),this.sleep(3e3).then(async()=>await this.slide("comments"))})),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(1e3))},comments:{html:"a-coin/comments",init:async()=>await document.querySelector("#sendComment").addEventListener("click",async()=>await this.prepareAction().then(async()=>{document.querySelector("#sendComment").parentNode.parentNode.classList.toggle("active"),this.animateValueDelay(".wallet",100,300,500,600),this.sleep(3e3).then(async()=>await this.slide("services"))})),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(1e3))},services:{html:"a-coin/services",init:async()=>await document.querySelector("#signUp").addEventListener("click",async()=>await this.prepareAction().then(async()=>{document.querySelector("#signUp").parentNode.parentNode.classList.toggle("active"),this.animateValueDelay(".wallet",300,500,500,1e3),this.sleep(3e3).then(async()=>await this.slide("collected"))})),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},collected:{html:"a-coin/collected",init:async()=>await document.querySelector("#whatToSpend").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("spend"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(1e3))},spend:{html:"a-coin/spend",init:async()=>await document.querySelector("#more").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("more"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(1e3))},more:{html:"a-coin/more",init:async()=>await this.TerminalApp.renderPresentationsLinks({targetNode:document.querySelector("#presentationsMenu"),excludePresentation:this.data.id}),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))}}}}class s extends n{constructor(e={}){super(e),Object.assign(this.data,{title:"Рейтинг на PROFILES",index:"02",header:"Каждая оценка повышает рейтинг",entrySlide:"intro"}),this.slides={intro:{html:"rating/intro",init:async()=>await document.querySelector(".switch").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.sleep(2e3).then(async()=>await this.slide("start")))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},start:{html:"rating/start",init:async()=>await document.querySelector("#whatIs").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("whatIs"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},whatIs:{html:"rating/whatIs",init:async()=>{await document.querySelector("#whatInfluences").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("whatInfluences"))),await this.sleep(1500).then(()=>document.querySelector(".background-cards").classList.toggle("animation",!0))},exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},whatInfluences:{html:"rating/whatInfluences",init:async()=>await document.querySelector("#writePosts").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("writePosts"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},writePosts:{html:"rating/writePosts",init:async()=>await document.querySelector("#answers").addEventListener("click",async()=>await this.prepareAction().then(async()=>{document.querySelector(".modal-interactive").classList.toggle("active"),this.animateValueDelay(".left-counter",0,50,1e3,500),this.animateValueDelay(".right-counter",0,100,1e3,500),this.sleep(3e3).then(async()=>await this.slide("answers"))})),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},answers:{html:"rating/answers",init:async()=>await document.querySelector("#sendComment").addEventListener("click",async()=>await this.prepareAction().then(async()=>{document.querySelector(".input-interactive").classList.toggle("active"),this.animateValueDelay(".left-counter",50,90,1e3,500),this.animateValueDelay(".right-counter",100,150,1e3,500),this.sleep(3e3).then(async()=>await this.slide("comments"))})),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},comments:{html:"rating/comments",init:async()=>await document.querySelector("#sendComment").addEventListener("click",async()=>await this.prepareAction().then(async()=>{document.querySelector(".input-interactive").classList.toggle("active"),this.animateValueDelay(".left-counter",90,150,1e3,500),this.animateValueDelay(".right-counter",150,300,1e3,500),this.sleep(2500).then(async()=>await this.slide("collected"))})),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),document.querySelector(".profileOnTop").classList.toggle("card-transformation-animation",!0),this.sleep(500).then(()=>document.querySelector(".hidden-card").classList.toggle("show",!0)),await this.sleep(1e3))},collected:{html:"rating/collected",init:async()=>{await document.querySelector("#more").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("more"))),await this.sleep(1e3).then(()=>document.querySelector(".card").classList.toggle("top-animation",!0))},exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},more:{html:"a-coin/more",init:async()=>await this.TerminalApp.renderPresentationsLinks({targetNode:document.querySelector("#presentationsMenu"),excludePresentation:this.data.id}),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))}}}}class c extends n{constructor(e={}){super(e),Object.assign(this.data,{title:"Услуги на PROFILES",index:"03",header:"Продвигай свои услуги",entrySlide:"intro"}),this.slides={intro:{html:"rating/intro",init:async()=>await document.querySelector(".switch").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.sleep(2e3).then(async()=>await this.slide("whatIs")))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},whatIs:{html:"services/whatIs",init:async()=>await document.querySelector("#accreditation").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("accreditation"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},accreditation:{html:"services/accreditation",init:async()=>await document.querySelector("#form").addEventListener("click",async()=>await this.prepareAction().then(async()=>{document.querySelector("#form").classList.toggle("active"),document.querySelector(".accreditation").classList.toggle("active"),this.sleep(2e3).then(async()=>this.slide("form"))})),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},form:{html:"services/form",init:async()=>await document.querySelector("#done").addEventListener("click",async()=>await this.prepareAction().then(async()=>{document.querySelector("#done").classList.toggle("active"),await document.querySelector("#name").classList.toggle("typing",!0),await this.typeAnimation({node:document.querySelector("#name"),content:"Название для крутой услуги"}),await document.querySelector("#price").classList.toggle("typing",!0),await this.typeAnimation({node:document.querySelector("#price"),content:"500 условных единиц"}),await document.querySelector("#categories").classList.toggle("typing",!0),this.sleep(1500).then(async()=>this.slide("done"))})),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(1e3))},done:{html:"services/done",init:async()=>await document.querySelector("#acoins").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("acoins"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},acoins:{html:"services/acoins",init:async()=>await document.querySelector("#promo").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("promo"))),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},promo:{html:"services/promo",init:async()=>{await document.querySelector("#leads").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("leads"))),await this.sleep(500).then(()=>this.typeAnimation({node:document.querySelector("#promocode"),content:"PRODAMGARAJ"}))},exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},leads:{html:"services/leads",init:async()=>{await document.querySelector("#more").addEventListener("click",async()=>await this.prepareAction().then(async()=>this.slide("more"))),await this.sleep(500).then(()=>this.typeAnimation({node:document.querySelector("#promocode"),content:"ssilka_na_tvoy_resurs"}))},exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))},more:{html:"a-coin/more",init:async()=>await this.TerminalApp.renderPresentationsLinks({targetNode:document.querySelector("#presentationsMenu"),excludePresentation:this.data.id}),exit:async()=>(document.querySelectorAll("section").forEach(e=>e.classList.add("unload")),await this.sleep(500))}}}typeAnimation({node:e,content:t="",duration:i=500}){const n=t.split(""),a=i/(n.length-1);return new Promise(t=>{const i=setInterval(()=>0===n.length?(clearInterval(i),t(!0)):e.textContent+=n.shift(),a)})}}i.d(t,"default",function(){return r});class r{constructor({htmlPath:e="assets/html/",idleTimeout:t=!localStorage.getItem("debug")&&2e4}={}){this.TerminalApp=this,this.parameters={htmlPath:e,idleTimeout:t},this.presentations={"a-coin":new a({TerminalApp:this}),rating:new s({TerminalApp:this}),services:new c({TerminalApp:this})},this.preparePresentations(),window.addEventListener("popstate",async e=>e.state?await this.initPresentation(e.state.presentation,e.state.slide,!1):await this.showTerminalMenu(!1)),document.addEventListener("click",this.resetIdleTimer.bind(this))}async init(){return history.state&&history.state.slide&&history.state.presentation?await this.initPresentation(history.state.presentation,history.state.slide,!1):location.search.length>1&&location.hash>1?await this.initPresentation(location.search.substr(1),location.hash.substr(1),!1):await this.showTerminalMenu(!1)}async prepareWrapper(){const e=document.createElement("main");this.root=e;const t=document.createElement("footer"),i=document.createElement("button");i.classList.toggle("fullscreen",!0),i.onclick=this.toggleFullScreen,t.appendChild(i),document.body.innerHTML="",document.body.appendChild(e),document.body.appendChild(t)}async preparePresentations(){await Promise.all(Object.entries(this.presentations).map(async e=>(e[1].data.id=e[0],await e[1].preloadSlides())));return await this.prepareWrapper(),await this.init()}async showTerminalMenu(e=!0){const t=document.createElement("section");t.classList.add("title"),t.style.marginTop="400rem",t.setAttribute("data-slide-swith",""),t.innerText="Сервисное меню";const i=document.createElement("section");i.classList.add("buttons"),i.style.marginTop="223rem",i.setAttribute("data-slide-swith",""),await this.renderPresentationsLinks({targetNode:i}),await this.unloadPage(),e&&history.pushState(null,this.data.title,""),this.root.appendChild(t),this.root.appendChild(i)}initPresentation(e,t,i=!0){return this.resetIdleTimer(),this.parameters.defaultPresentation||(this.parameters.defaultPresentation=e),this.presentations[e].init(t,i)}async renderPresentationsLinks({targetNode:e,excludePresentation:t=!1}={}){e.innerHtml="",Object.entries(this.TerminalApp.presentations).forEach(i=>{if(i[0]===t)return;const n=document.createElement("button");n.innerText=i[1].data.title,n.onclick=(async()=>await this.TerminalApp.presentations["a-coin"].prepareAction().then(this.TerminalApp.initPresentation.bind(this,i[0],null,!0))),e.appendChild(n)})}resetIdleTimer(){this.idleTimeout&&clearTimeout(this.idleTimeout),this.parameters.idleTimeout&&(this.idleTimeout=setTimeout(this.triggerIdleTimer.bind(this),this.parameters.idleTimeout))}triggerIdleTimer(){this.TerminalApp.currentSlideId&&this.TerminalApp.currentPresentation&&this.TerminalApp.currentPresentation.data.entrySlide!==this.TerminalApp.currentSlideId&&this.initPresentation(this.parameters.defaultPresentation||this.TerminalApp.currentPresentation.data.id),this.resetIdleTimer()}async unloadPage(e=!0){return this.TerminalApp.currentSlide&&this.TerminalApp.currentSlide.exit&&await this.TerminalApp.currentSlide.exit(),e&&(this.root.innerHTML=""),this.currentSlide=!1,this.currentSlideId=!1,await!0}toggleFullScreen(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}window.App=new r}]);